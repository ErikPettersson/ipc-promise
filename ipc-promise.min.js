/*!
 * @license ipc-promise Copyright(c) 2015 sasa+1
 * https://github.com/sasaplus1/ipc-promise
 * Released under the MIT license.
 */
!function(e,n){"use strict";"function"==typeof define&&define.amd?define(["electron","events"],n):"object"==typeof exports?module.exports=n(require("electron"),require("events")):e.ipcPromise=n(global.require("electron"),global.require("events"))}((this||0).self||global,function(e,n){"use strict";function t(e,n){f.on(n.eventName+d,function(t){e.sender.send(s,{data:t,eventName:n.eventName,id:n.id})}),f.on(n.eventName+m,function(t){e.sender.send(u,{data:t,eventName:n.eventName,id:n.id})}),f.emit(n.eventName,n.data,e)}function i(e,n){return new Promise(function(t,i){var o,r,d=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER);a.on(s,o=function(n,i){i.id===d&&i.eventName===e&&(a.removeListener(s,o),a.removeListener(u,r),t(i.data))}),a.on(u,r=function(n,t){t.id===d&&t.eventName===e&&(a.removeListener(s,o),a.removeListener(u,r),i(t.data))}),a.send(c,{data:n,eventName:e,id:d})})}function o(e,n){f.on(e,function(t,i){n(t,i).then(function(n){f.emit(e+d,n)}).catch(function(n){f.emit(e+m,n)})})}var r=e.ipcMain,a=e.ipcRenderer,c="ipc-promise-common-event",d="-success",m="-failure",s=c+d,u=c+m,f=new n.EventEmitter;return"undefined"==typeof window&&r.on(c,t),{on:o,send:i}});